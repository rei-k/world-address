# Kustomization for Production Environment
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: world-address-prod

# Base resources
resources:
  - ../base/namespace.yaml
  - ../base/configmap.yaml
  - ../base/secrets.yaml
  - ../base/deployment.yaml
  - ../base/service.yaml
  - ../base/postgres.yaml
  - ../base/redis.yaml
  - ../base/hpa.yaml
  - ../base/ingress.yaml
  - ../base/rbac.yaml

# Production-specific patches
patchesStrategicMerge:
  - deployment-patch.yaml
  - hpa-patch.yaml

# ConfigMap generator for production settings
configMapGenerator:
  - name: world-address-config
    behavior: merge
    literals:
      - NODE_ENV=production
      - LOG_LEVEL=warn
      - ENABLE_ANALYTICS=true

# Image tag override
images:
  - name: world-address
    newName: ghcr.io/rei-k/world-address
    newTag: v1.0.0

# Labels applied to all resources
commonLabels:
  environment: production
  managed-by: kustomize

# Annotations applied to all resources
commonAnnotations:
  deployment.kubernetes.io/revision: "1"
